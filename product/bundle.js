!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=74)}([function(t,e,n){"use strict";function r(){try{var t=S;return S=null,t.apply(this,arguments)}catch(t){return F.e=t,F}}function i(t){return S=t,r}function o(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function s(t){return!o(t)}function a(t){return o(t)?new Error(v(t)):t}function u(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function c(t,e,n){if(!j.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function l(t,e,n){if(o(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return j.defineProperty(t,e,r),t}function f(t){throw t}function p(t){try{if("function"==typeof t){var e=j.names(t.prototype),n=j.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=C.test(t+"")&&j.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function h(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function d(t){return T.test(t)}function _(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function v(t){try{return t+""}catch(t){return"[no string representation]"}}function y(t){try{l(t,"isOperational",!0)}catch(t){}}function m(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function g(t){return t instanceof Error&&j.propertyIsWritable(t,"stack")}function b(t){return{}.toString.call(t)}function w(t,e,n){for(var r=j.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{j.defineProperty(e,o,j.getDescriptor(t,o))}catch(t){}}}var j=n(5),k="undefined"==typeof navigator,E=function(){try{var t={};return j.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(t){return!1}}(),F={e:{}},S,x=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},A=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(j.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(t){return r}for(var s=0;s<o.length;++s){var a=o[s];if(!i[a]){i[a]=!0;var u=Object.getOwnPropertyDescriptor(t,a);null!=u&&null==u.get&&null==u.set&&r.push(a)}}t=j.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),C=/this\s*\.\s*\S+\s*=/,T=/^[a-z$_][a-z$_0-9]*$/i,P=function(){return"stack"in new Error?function(t){return g(t)?t:new Error(v(t))}:function(t){if(g(t))return t;try{throw new Error(v(t))}catch(t){return t}}}(),O={isClass:p,isIdentifier:d,inheritedDataKeys:A,getDataPropertyOrDefault:c,thrower:f,isArray:j.isArray,haveGetters:E,notEnumerableProp:l,isPrimitive:o,isObject:s,canEvaluate:k,errorObj:F,tryCatch:i,inherits:x,withAppended:u,maybeWrapAsError:a,toFastProperties:h,filledRange:_,toString:v,canAttachTrace:g,ensureErrorObject:P,originatesFromRejection:m,markAsOriginatingFromRejection:y,classString:b,copyDescriptors:w,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:"undefined"!=typeof process&&"[object process]"===b(process).toLowerCase()};O.isRecentNode=O.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),O.isNode&&O.toFastProperties(process);try{throw new Error}catch(t){O.lastLineError=t}t.exports=O},function(t,e){t.exports=require("log4js")},function(t,e,n){"use strict";function r(t,e){function n(r){if(!(this instanceof n))return new n(r);f(this,"message","string"==typeof r?r:e),f(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}function i(t){if(!(this instanceof i))return new i(t);f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var o,s,a=n(5),u=a.freeze,c=n(0),l=c.inherits,f=c.notEnumerableProp,p=r("Warning","warning"),h=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),_=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(t){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<v.length;++y)"function"==typeof Array.prototype[v[y]]&&(_.prototype[v[y]]=Array.prototype[v[y]]);a.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var m=0;_.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return m--,e},l(i,Error);var g=Error.__BluebirdErrorTypes__;g||(g=u({CancellationError:h,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:_}),f(Error,"__BluebirdErrorTypes__",g)),t.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:g.CancellationError,OperationalError:g.OperationalError,TimeoutError:g.TimeoutError,AggregateError:g.AggregateError,Warning:p}},function(t,e,n){"use strict";function r(){this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=u.isStatic?u(this.drainQueues):u}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var a;try{throw new Error}catch(t){a=t}var u=n(56),c=n(53),l=n(0);r.prototype.disableTrampolineIfNecessary=function(){l.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},r.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},l.hasDevTools?(u.isStatic&&(u=function(t){setTimeout(t,0)}),r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=s),r.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},t.exports=new r,t.exports.firstLineError=a},function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=n(49)();o.noConflict=r,t.exports=o},function(t,e){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype,s=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e},a=function(t,e){return{value:t[e]}},u=function(t,e,n){return t[e]=n.value,t},c=function(t){return t},l=function(t){try{return Object(t).constructor.prototype}catch(t){return o}},f=function(t){try{return"[object Array]"===i.call(t)}catch(t){return!1}};t.exports={isArray:f,keys:s,names:s,defineProperty:u,getDescriptor:a,freeze:c,getPrototypeOf:l,isES5:n,propertyIsWritable:function(){return!0}}}},function(t,e,n){"use strict";e.mongoose=n(21)},function(t,e){t.exports=require("fs")},function(t,e,n){"use strict";n(27).env.ENVSET(),n(28).log4j.set();var r=n(65),i=n(12).cpus().length;if(r.isMaster){console.log(" Fork %s worker(s) from master",i);for(var o=0;o<i;o++)r.fork();r.on("online",function(t){console.log("worker is running on %s pid",t.process.pid)}),r.on("exit",function(t,e,n){console.log("worker with %s is closed",t.process.pid)})}else r.isWorker&&(console.log("worker (%s) is running",r.worker.process.pid),n(30).boot());r.on("death",function(t){console.log("worker "+t.pid+" died. restart..."),r.fork()})},function(t,e,n){"use strict";function r(t){return t instanceof Error&&h.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new f(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=h.keys(t),i=0;i<n.length;++i){var o=n[i];d.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t){return function(e,n){if(null!==t){if(e){var r=i(u(e));t._attachExtraTrace(r),t._reject(r)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),a=1;a<o;++a)s[a-1]=arguments[a];t._fulfill(s)}else t._fulfill(n);t=null}}}var s,a=n(0),u=a.maybeWrapAsError,c=n(2),l=c.TimeoutError,f=c.OperationalError,p=a.haveGetters,h=n(5),d=/^(?:name|message|stack|cause)$/;if(s=p?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=o(t),this.callback=this.asCallback},p){var _={get:function(){return o(this.promise)}};h.defineProperty(s.prototype,"asCallback",_),h.defineProperty(s.prototype,"callback",_)}s._nodebackForPromise=o,s.prototype.toString=function(){return"[object PromiseResolver]"},s.prototype.resolve=s.prototype.fulfill=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},s.prototype.reject=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},s.prototype.progress=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},s.prototype.cancel=function(t){this.promise.cancel(t)},s.prototype.timeout=function(){this.reject(new l("timeout"))},s.prototype.isResolved=function(){return this.promise.isResolved()},s.prototype.toJSON=function(){return this.promise.toJSON()},t.exports=s},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=require("multiparty")},function(t,e){t.exports=require("os")},function(t,e){t.exports=require("uuid")},function(t,e){t.exports={uploadBinary:{_links:"http://www.jsendev.com:3000/upload/binary",des:"上传一个二进制文件",method:"POST",params:[{name:"file",type:"multipart",des:"一个multipart文件"}]},uploadText:{_links:"http://www.jsendev.com:3000/upload/text",des:"上床一段文本文件",method:"POST",params:[{name:"strName",type:"string",des:"文本的名字，可用此名字查找该文件"},{name:"str",type:"string",desc:"文本的内容"}]},updateBinary:{_links:"http://www.jsendev.com:3000/update/binary",des:"更新一个二进制文件",method:"POST",params:[{name:"file",type:"multipart",des:"一个multipart文件"}]},updateText:{_links:"http://www.jsendev.com:3000/update/text",des:"更新一段文本字段",method:"POST",params:[{name:"strName",type:"string",des:"文本的名字，可用此名字查找该文件"},{name:"str",type:"string",desc:"文本的内容"}]},delete:{_links:"http://www.jsendev.com:3000/update/delete/:fileName",des:"删除一个文件或文本字段",method:"GET",params:[]},download:{_links:"http://www.jsendev.com:3000/download/download/:fileName",des:"下载文件",method:"GET",params:[]},show:{_links:"http://www.jsendev.com:3000/download/show/:fileName",des:"在浏览器显示文件（如果可以显示）",method:"GET",params:[]}}},function(t,e,n){(function(t){!function(t,n){n(e)}(0,function(e){"use strict";function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function r(t,e,r){return e=Zt(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=Zt(i.length-e,0),a=Array(s);++o<s;)a[o]=i[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=i[o];return u[e]=r(a),n(t,this,u)}}function i(t){return t}function o(t,e){return r(t,e,i)}function s(t){return o(function(e,n){var r=te(function(n,r){var i=this;return t(e,function(t,e){t.apply(i,n.concat([e]))},r)});return n.length?r.apply(this,n):r})}function a(t){var e=se.call(t,ue),n=t[ue];try{t[ue]=void 0}catch(t){}var r=ae.call(t);return e?t[ue]=n:delete t[ue],r}function u(t){return le.call(t)}function c(t){return null==t?void 0===t?pe:fe:(t=Object(t),he&&he in t?a(t):u(t))}function l(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function f(t){if(!l(t))return!1;var e=c(t);return e==_e||e==ve||e==de||e==ye}function p(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=me}function h(t){return null!=t&&p(t.length)&&!f(t)}function d(){}function _(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}function v(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function y(t){return null!=t&&"object"==typeof t}function m(t){return y(t)&&c(t)==we}function g(){return!1}function b(t,e){return!!(e=null==e?Re:e)&&("number"==typeof t||Le.test(t))&&t>-1&&t%1==0&&t<e}function w(t){return y(t)&&p(t.length)&&!!Ie[c(t)]}function j(t,e){var n=Se(t),r=!n&&Fe(t),i=!n&&!r&&Oe(t),o=!n&&!r&&!i&&qe(t),s=n||r||i||o,a=s?v(t.length,String):[],u=a.length;for(var c in t)!e&&!ze.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||b(c,u))||a.push(c);return a}function k(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ge)}function E(t){if(!k(t))return $e(t);var e=[];for(var n in Object(t))We.call(t,n)&&"constructor"!=n&&e.push(n);return e}function F(t){return h(t)?j(t):E(t)}function S(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}function x(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function A(t){var e=F(t),n=-1,r=e.length;return function(){var i=e[++n];return n<r?{value:t[i],key:i}:null}}function C(t){if(h(t))return S(t);var e=be(t);return e?x(e):A(t)}function T(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function P(t){return function(e,n,r){function i(t,e){if(u-=1,t)a=!0,r(t);else{if(e===Ke||a&&u<=0)return a=!0,r(null);o()}}function o(){for(;u<t&&!a;){var e=s();if(null===e)return a=!0,void(u<=0&&r(null));u+=1,n(e.value,e.key,T(i))}}if(r=_(r||d),t<=0||!e)return r(null);var s=C(e),a=!1,u=0;o()}}function O(t,e,n,r){P(e)(t,n,r)}function R(t,e){return function(n,r,i){return t(n,e,r,i)}}function L(t,e,n){function r(t){t?n(t):++o===s&&n(null)}n=_(n||d);var i=0,o=0,s=t.length;for(0===s&&n(null);i<s;i++)e(t[i],i,T(r))}function I(t){return function(e,n,r){return t(Ye,e,n,r)}}function U(t,e,n,r){r=r||d,e=e||[];var i=[],o=0;t(e,function(t,e,r){var s=o++;n(t,function(t,e){i[s]=e,r(t)})},function(t){r(t,i)})}function N(t){return function(e,n,r,i){return t(P(n),e,r,i)}}function D(t){return te(function(e,n){var r;try{r=t.apply(this,e)}catch(t){return n(t)}l(r)&&"function"==typeof r.then?r.then(function(t){n(null,t)},function(t){n(t.message?t:new Error(t))}):n(null,r)})}function M(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function V(t,e){return t&&sn(t,e,F)}function H(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function B(t){return t!==t}function q(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Q(t,e,n){return e===e?q(t,e,n):H(t,B,n)}function z(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function G(t){return"symbol"==typeof t||y(t)&&c(t)==un}function $(t){if("string"==typeof t)return t;if(Se(t))return z(t,$)+"";if(G(t))return fn?fn.call(t):"";var e=t+"";return"0"==e&&1/t==-cn?"-0":e}function J(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function W(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:J(t,e,n)}function K(t,e){for(var n=t.length;n--&&Q(e,t[n],0)>-1;);return n}function X(t,e){for(var n=-1,r=t.length;++n<r&&Q(e,t[n],0)>-1;);return n}function Y(t){return t.split("")}function Z(t){return pn.test(t)}function tt(t){return t.match(wn)||[]}function et(t){return Z(t)?tt(t):Y(t)}function nt(t){return null==t?"":$(t)}function rt(t,e,n){if((t=nt(t))&&(n||void 0===e))return t.replace(jn,"");if(!t||!(e=$(e)))return t;var r=et(t),i=et(e);return W(r,X(r,i),K(r,i)+1).join("")}function it(t){return t=t.toString().replace(Sn,""),t=t.match(kn)[2].replace(" ",""),t=t?t.split(En):[],t=t.map(function(t){return rt(t.replace(Fn,""))})}function ot(t,e){var n={};V(t,function(t,e){function r(e,n){var r=z(i,function(t){return e[t]});r.push(n),t.apply(null,r)}var i;if(Se(t))i=t.slice(0,-1),t=t[t.length-1],n[e]=i.concat(i.length>0?r:t);else if(1===t.length)n[e]=t;else{if(i=it(t),0===t.length&&0===i.length)throw new Error("autoInject task functions require explicit parameters.");i.pop(),n[e]=i.concat(r)}}),an(n,e)}function st(t){setTimeout(t,0)}function at(t){return o(function(e,n){t(function(){e.apply(null,n)})})}function ut(){this.head=this.tail=null,this.length=0}function ct(t,e){t.length=1,t.head=t.tail=e}function lt(t,e,n){function r(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(u.started=!0,Se(t)||(t=[t]),0===t.length&&u.idle())return Cn(function(){u.drain()});for(var r=0,i=t.length;r<i;r++){var o={data:t[r],callback:n||d};e?u._tasks.unshift(o):u._tasks.push(o)}Cn(u.process)}function i(t){return o(function(e){s-=1;for(var n=0,r=t.length;n<r;n++){var i=t[n],o=Q(a,i,0);o>=0&&a.splice(o),i.callback.apply(i,e),null!=e[0]&&u.error(e[0],i.data)}s<=u.concurrency-u.buffer&&u.unsaturated(),u.idle()&&u.drain(),u.process()})}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a=[],u={_tasks:new ut,concurrency:e,payload:n,saturated:d,unsaturated:d,buffer:e/4,empty:d,drain:d,error:d,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){u.drain=d,u._tasks.empty()},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!u.paused&&s<u.concurrency&&u._tasks.length;){var e=[],n=[],r=u._tasks.length;u.payload&&(r=Math.min(r,u.payload));for(var o=0;o<r;o++){var c=u._tasks.shift();e.push(c),n.push(c.data)}0===u._tasks.length&&u.empty(),s+=1,a.push(e[0]),s===u.concurrency&&u.saturated();var l=T(i(e));t(n,l)}},length:function(){return u._tasks.length},running:function(){return s},workersList:function(){return a},idle:function(){return u._tasks.length+s===0},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var t=Math.min(u.concurrency,u._tasks.length),e=1;e<=t;e++)Cn(u.process)}}};return u}function ft(t,e){return lt(t,1,e)}function pt(t,e,n,r){r=_(r||d),Pn(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t,e)})}function ht(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function dt(t,e,n){return function(r,i,o,s){function a(){s&&s(null,n(!1))}function u(t,r,i){if(!s)return i();o(t,function(r,a){s&&(r||e(a))?(r?s(r):s(r,n(!0,t)),s=o=!1,i(r,Ke)):i()})}arguments.length>3?(s=s||d,t(r,i,u,a)):(s=o,s=s||d,o=i,t(r,u,a))}}function _t(t,e){return e}function vt(t){return o(function(e,n){e.apply(null,n.concat([o(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&M(n,function(e){console[t](e)}))})]))})}function yt(t,e,n){function r(e,r){return e?n(e):r?void t(i):n(null)}n=T(n||d);var i=o(function(t,i){if(t)return n(t);i.push(r),e.apply(this,i)});r(null,!0)}function mt(t,e,n){n=T(n||d);var r=o(function(i,o){return i?n(i):e.apply(this,o)?t(r):void n.apply(null,[null].concat(o))});t(r)}function gt(t,e,n){mt(t,function(){return!e.apply(this,arguments)},n)}function bt(t,e,n){function r(e){if(e)return n(e);t(i)}function i(t,i){return t?n(t):i?void e(r):n(null)}n=T(n||d),t(i)}function wt(t){return function(e,n,r){return t(e,r)}}function jt(t,e,n){Ye(t,wt(e),n)}function kt(t,e,n,r){P(e)(t,wt(n),r)}function Et(t){return te(function(e,n){var r=!0;e.push(function(){var t=arguments;r?Cn(function(){n.apply(null,t)}):n.apply(null,t)}),t.apply(this,e),r=!1})}function Ft(t){return!t}function St(t){return function(e){return null==e?void 0:e[t]}}function xt(t,e,n,r){var i=new Array(e.length);t(e,function(t,e,r){n(t,function(t,n){i[e]=!!n,r(t)})},function(t){if(t)return r(t);for(var n=[],o=0;o<e.length;o++)i[o]&&n.push(e[o]);r(null,n)})}function At(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n,o){n?r(n):(o&&i.push({index:e,value:t}),r())})},function(t){t?r(t):r(null,z(i.sort(function(t,e){return t.index-e.index}),St("value")))})}function Ct(t,e,n,r){(h(e)?xt:At)(t,e,n,r||d)}function Tt(t,e){function n(t){if(t)return r(t);i(n)}var r=T(e||d),i=Et(t);n()}function Pt(t,e,n,r){r=_(r||d);var i={};O(t,e,function(t,e,r){n(t,e,function(t,n){if(t)return r(t);i[e]=n,r()})},function(t){r(t,i)})}function Ot(t,e){return e in t}function Rt(t,e){var n=Object.create(null),r=Object.create(null);e=e||i;var s=te(function(i,s){var a=e.apply(null,i);Ot(n,a)?Cn(function(){s.apply(null,n[a])}):Ot(r,a)?r[a].push(s):(r[a]=[s],t.apply(null,i.concat([o(function(t){n[a]=t;var e=r[a];delete r[a];for(var i=0,o=e.length;i<o;i++)e[i].apply(null,t)})])))});return s.memo=n,s.unmemoized=t,s}function Lt(t,e,n){n=n||d;var r=h(e)?[]:{};t(e,function(t,e,n){t(o(function(t,i){i.length<=1&&(i=i[0]),r[e]=i,n(t)}))},function(t){n(t,r)})}function It(t,e){Lt(Ye,t,e)}function Ut(t,e,n){Lt(P(e),t,n)}function Nt(t,e){if(e=_(e||d),!Se(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var n=0,r=t.length;n<r;n++)t[n](e)}function Dt(t,e,n,r){pt(tr.call(t).reverse(),e,n,r)}function Mt(t){return te(function(e,n){return e.push(o(function(t,e){if(t)n(null,{error:t});else{var r=null;1===e.length?r=e[0]:e.length>1&&(r=e),n(null,{value:r})}})),t.apply(this,e)})}function Vt(t,e,n,r){Ct(t,e,function(t,e){n(t,function(t,n){e(t,!n)})},r)}function Ht(t){var e;return Se(t)?e=z(t,Mt):(e={},V(t,function(t,n){e[n]=Mt.call(this,t)})),e}function Bt(t){return function(){return t}}function qt(t,e,n){function r(){e(function(t){t&&a++<s.times&&("function"!=typeof s.errorFilter||s.errorFilter(t))?setTimeout(r,s.intervalFunc(a)):n.apply(null,arguments)})}var i=5,o=0,s={times:i,intervalFunc:Bt(o)};if(arguments.length<3&&"function"==typeof t?(n=e||d,e=t):(!function(t,e){if("object"==typeof e)t.times=+e.times||i,t.intervalFunc="function"==typeof e.interval?e.interval:Bt(+e.interval||o),t.errorFilter=e.errorFilter;else{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Invalid arguments for async.retry");t.times=+e||i}}(s,t),n=n||d),"function"!=typeof e)throw new Error("Invalid arguments for async.retry");var a=1;r()}function Qt(t,e){Lt(Pn,t,e)}function zt(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}Ze(t,function(t,n){e(t,function(e,r){if(e)return n(e);n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);n(null,z(e.sort(r),St("value")))})}function Gt(t,e,n){function r(){a||(o.apply(null,arguments),clearTimeout(s))}function i(){var e=t.name||"anonymous",r=new Error('Callback function "'+e+'" timed out.');r.code="ETIMEDOUT",n&&(r.info=n),a=!0,o(r)}var o,s,a=!1;return te(function(n,a){o=a,s=setTimeout(i,e),t.apply(null,n.concat(r))})}function $t(t,e,n,r){for(var i=-1,o=cr(ur((e-t)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=t,t+=n;return s}function Jt(t,e,n,r){en($t(0,t,1),e,n,r)}function Wt(t,e,n,r){3===arguments.length&&(r=n,n=e,e=Se(t)?[]:{}),r=_(r||d),Ye(t,function(t,r,i){n(e,t,r,i)},function(t){r(t,e)})}function Kt(t){return function(){return(t.unmemoized||t).apply(null,arguments)}}function Xt(t,e,n){if(n=T(n||d),!t())return n(null);var r=o(function(i,o){return i?n(i):t()?e(r):void n.apply(null,[null].concat(o))});e(r)}function Yt(t,e,n){Xt(function(){return!t.apply(this,arguments)},e,n)}var Zt=Math.max,te=function(t){return o(function(e){var n=e.pop();t.call(this,e,n)})},ee="object"==typeof global&&global&&global.Object===Object&&global,ne="object"==typeof self&&self&&self.Object===Object&&self,re=ee||ne||Function("return this")(),ie=re.Symbol,oe=Object.prototype,se=oe.hasOwnProperty,ae=oe.toString,ue=ie?ie.toStringTag:void 0,ce=Object.prototype,le=ce.toString,fe="[object Null]",pe="[object Undefined]",he=ie?ie.toStringTag:void 0,de="[object AsyncFunction]",_e="[object Function]",ve="[object GeneratorFunction]",ye="[object Proxy]",me=9007199254740991,ge="function"==typeof Symbol&&Symbol.iterator,be=function(t){return ge&&t[ge]&&t[ge]()},we="[object Arguments]",je=Object.prototype,ke=je.hasOwnProperty,Ee=je.propertyIsEnumerable,Fe=m(function(){return arguments}())?m:function(t){return y(t)&&ke.call(t,"callee")&&!Ee.call(t,"callee")},Se=Array.isArray,xe="object"==typeof e&&e&&!e.nodeType&&e,Ae=xe&&"object"==typeof t&&t&&!t.nodeType&&t,Ce=Ae&&Ae.exports===xe,Te=Ce?re.Buffer:void 0,Pe=Te?Te.isBuffer:void 0,Oe=Pe||g,Re=9007199254740991,Le=/^(?:0|[1-9]\d*)$/,Ie={};Ie["[object Float32Array]"]=Ie["[object Float64Array]"]=Ie["[object Int8Array]"]=Ie["[object Int16Array]"]=Ie["[object Int32Array]"]=Ie["[object Uint8Array]"]=Ie["[object Uint8ClampedArray]"]=Ie["[object Uint16Array]"]=Ie["[object Uint32Array]"]=!0,Ie["[object Arguments]"]=Ie["[object Array]"]=Ie["[object ArrayBuffer]"]=Ie["[object Boolean]"]=Ie["[object DataView]"]=Ie["[object Date]"]=Ie["[object Error]"]=Ie["[object Function]"]=Ie["[object Map]"]=Ie["[object Number]"]=Ie["[object Object]"]=Ie["[object RegExp]"]=Ie["[object Set]"]=Ie["[object String]"]=Ie["[object WeakMap]"]=!1;var Ue,Ne="object"==typeof e&&e&&!e.nodeType&&e,De=Ne&&"object"==typeof t&&t&&!t.nodeType&&t,Me=De&&De.exports===Ne,Ve=Me&&ee.process,He=function(){try{return Ve&&Ve.binding("util")}catch(t){}}(),Be=He&&He.isTypedArray,qe=Be?function(t){return function(e){return t(e)}}(Be):w,Qe=Object.prototype,ze=Qe.hasOwnProperty,Ge=Object.prototype,$e=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),Je=Object.prototype,We=Je.hasOwnProperty,Ke={},Xe=R(O,1/0),Ye=function(t,e,n){(h(t)?L:Xe)(t,e,n)},Ze=I(U),tn=s(Ze),en=N(U),nn=R(en,1),rn=s(nn),on=o(function(t,e){return o(function(n){return t.apply(null,e.concat(n))})}),sn=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}(),an=function(t,e,n){function r(t,e){m.push(function(){u(t,e)})}function i(){if(0===m.length&&0===h)return n(null,p);for(;m.length&&h<e;){m.shift()()}}function s(t,e){var n=y[t];n||(n=y[t]=[]),n.push(e)}function a(t){M(y[t]||[],function(t){t()}),i()}function u(t,e){if(!v){var r=T(o(function(e,r){if(h--,r.length<=1&&(r=r[0]),e){var i={};V(p,function(t,e){i[e]=t}),i[t]=r,v=!0,y=[],n(e,i)}else p[t]=r,a(t)}));h++;var i=e[e.length-1];e.length>1?i(p,r):i(r)}}function c(e){var n=[];return V(t,function(t,r){Se(t)&&Q(t,e,0)>=0&&n.push(r)}),n}"function"==typeof e&&(n=e,e=null),n=_(n||d);var l=F(t),f=l.length;if(!f)return n(null);e||(e=f);var p={},h=0,v=!1,y={},m=[],g=[],b={};V(t,function(e,n){if(!Se(e))return r(n,[e]),void g.push(n);var i=e.slice(0,e.length-1),o=i.length;if(0===o)return r(n,e),void g.push(n);b[n]=o,M(i,function(a){if(!t[a])throw new Error("async.auto task `"+n+"` has a non-existent dependency in "+i.join(", "));s(a,function(){0===--o&&r(n,e)})})}),function(){for(var t,e=0;g.length;)t=g.pop(),e++,M(c(t),function(t){0==--b[t]&&g.push(t)});if(e!==f)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),i()},un="[object Symbol]",cn=1/0,ln=ie?ie.prototype:void 0,fn=ln?ln.toString:void 0,pn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),hn="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",dn="\\ud83c[\\udffb-\\udfff]",_n="(?:\\ud83c[\\udde6-\\uddff]){2}",vn="[\\ud800-\\udbff][\\udc00-\\udfff]",yn="(?:"+hn+"|"+dn+")?",mn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",_n,vn].join("|")+")[\\ufe0e\\ufe0f]?"+yn+")*",gn="[\\ufe0e\\ufe0f]?"+yn+mn,bn="(?:"+["[^\\ud800-\\udfff]"+hn+"?",hn,_n,vn,"[\\ud800-\\udfff]"].join("|")+")",wn=RegExp(dn+"(?="+dn+")|"+bn+gn,"g"),jn=/^\s+|\s+$/g,kn=/^(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,En=/,/,Fn=/(=.+)?(\s*)$/,Sn=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,xn="function"==typeof setImmediate&&setImmediate,An="object"==typeof process&&"function"==typeof process.nextTick;Ue=xn?setImmediate:An?process.nextTick:st;var Cn=at(Ue);ut.prototype.removeLink=function(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t},ut.prototype.empty=ut,ut.prototype.insertAfter=function(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1},ut.prototype.insertBefore=function(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1},ut.prototype.unshift=function(t){this.head?this.insertBefore(this.head,t):ct(this,t)},ut.prototype.push=function(t){this.tail?this.insertAfter(this.tail,t):ct(this,t)},ut.prototype.shift=function(){return this.head&&this.removeLink(this.head)},ut.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)};var Tn,Pn=R(O,1),On=o(function(t){return o(function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=d,pt(t,e,function(t,e,r){e.apply(n,t.concat([o(function(t,e){r(t,e)})]))},function(t,e){r.apply(n,[t].concat(e))})})}),Rn=o(function(t){return On.apply(null,t.reverse())}),Ln=I(ht),In=function(t){return function(e,n,r){return t(Pn,e,n,r)}}(ht),Un=o(function(t){var e=[null].concat(t);return te(function(t,n){return n.apply(this,e)})}),Nn=dt(Ye,i,_t),Dn=dt(O,i,_t),Mn=dt(Pn,i,_t),Vn=vt("dir"),Hn=R(kt,1),Bn=dt(Ye,Ft,Ft),qn=dt(O,Ft,Ft),Qn=R(qn,1),zn=I(Ct),Gn=N(Ct),$n=R(Gn,1),Jn=vt("log"),Wn=R(Pt,1/0),Kn=R(Pt,1);Tn=An?process.nextTick:xn?setImmediate:st;var Xn=at(Tn),Yn=function(t,e){return lt(function(e,n){t(e[0],n)},e,1)},Zn=function(t,e){var n=Yn(t,e);return n.push=function(t,e,r){if(null==r&&(r=d),"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,Se(t)||(t=[t]),0===t.length)return Cn(function(){n.drain()});e=e||0;for(var i=n._tasks.head;i&&e>=i.priority;)i=i.next;for(var o=0,s=t.length;o<s;o++){var a={data:t[o],priority:e,callback:r};i?n._tasks.insertBefore(i,a):n._tasks.push(a)}Cn(n.process)},delete n.unshift,n},tr=Array.prototype.slice,er=I(Vt),nr=N(Vt),rr=R(nr,1),ir=function(t,e){return e||(e=t,t=null),te(function(n,r){function i(t){e.apply(null,n.concat([t]))}t?qt(t,i,r):qt(i,r)})},or=dt(Ye,Boolean,i),sr=dt(O,Boolean,i),ar=R(sr,1),ur=Math.ceil,cr=Math.max,lr=R(Jt,1/0),fr=R(Jt,1),pr=function(t,e){function n(i){if(r===t.length)return e.apply(null,[null].concat(i));var s=T(o(function(t,r){if(t)return e.apply(null,[t].concat(r));n(r)}));i.push(s),t[r++].apply(null,i)}if(e=_(e||d),!Se(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var r=0;n([])},hr={applyEach:tn,applyEachSeries:rn,apply:on,asyncify:D,auto:an,autoInject:ot,cargo:ft,compose:Rn,concat:Ln,concatSeries:In,constant:Un,detect:Nn,detectLimit:Dn,detectSeries:Mn,dir:Vn,doDuring:yt,doUntil:gt,doWhilst:mt,during:bt,each:jt,eachLimit:kt,eachOf:Ye,eachOfLimit:O,eachOfSeries:Pn,eachSeries:Hn,ensureAsync:Et,every:Bn,everyLimit:qn,everySeries:Qn,filter:zn,filterLimit:Gn,filterSeries:$n,forever:Tt,log:Jn,map:Ze,mapLimit:en,mapSeries:nn,mapValues:Wn,mapValuesLimit:Pt,mapValuesSeries:Kn,memoize:Rt,nextTick:Xn,parallel:It,parallelLimit:Ut,priorityQueue:Zn,queue:Yn,race:Nt,reduce:pt,reduceRight:Dt,reflect:Mt,reflectAll:Ht,reject:er,rejectLimit:nr,rejectSeries:rr,retry:qt,retryable:ir,seq:On,series:Qt,setImmediate:Cn,some:or,someLimit:sr,someSeries:ar,sortBy:zt,timeout:Gt,times:lr,timesLimit:Jt,timesSeries:fr,transform:Wt,unmemoize:Kt,until:Yt,waterfall:pr,whilst:Xt,all:Bn,any:or,forEach:jt,forEachSeries:Hn,forEachLimit:kt,forEachOf:Ye,forEachOfSeries:Pn,forEachOfLimit:O,inject:pt,foldl:pt,foldr:Dt,select:zn,selectLimit:Gn,selectSeries:$n,wrapSync:D};e.default=hr,e.applyEach=tn,e.applyEachSeries=rn,e.apply=on,e.asyncify=D,e.auto=an,e.autoInject=ot,e.cargo=ft,e.compose=Rn,e.concat=Ln,e.concatSeries=In,e.constant=Un,e.detect=Nn,e.detectLimit=Dn,e.detectSeries=Mn,e.dir=Vn,e.doDuring=yt,e.doUntil=gt,e.doWhilst=mt,e.during=bt,e.each=jt,e.eachLimit=kt,e.eachOf=Ye,e.eachOfLimit=O,e.eachOfSeries=Pn,e.eachSeries=Hn,e.ensureAsync=Et,e.every=Bn,e.everyLimit=qn,e.everySeries=Qn,e.filter=zn,e.filterLimit=Gn,e.filterSeries=$n,e.forever=Tt,e.log=Jn,e.map=Ze,e.mapLimit=en,e.mapSeries=nn,e.mapValues=Wn,e.mapValuesLimit=Pt,e.mapValuesSeries=Kn,e.memoize=Rt,e.nextTick=Xn,e.parallel=It,e.parallelLimit=Ut,e.priorityQueue=Zn,e.queue=Yn,e.race=Nt,e.reduce=pt,e.reduceRight=Dt,e.reflect=Mt,e.reflectAll=Ht,e.reject=er,e.rejectLimit=nr,e.rejectSeries=rr,e.retry=qt,e.retryable=ir,e.seq=On,e.series=Qt,e.setImmediate=Cn,e.some=or,e.someLimit=sr,e.someSeries=ar,e.sortBy=zt,e.timeout=Gt,e.times=lr,e.timesLimit=Jt,e.timesSeries=fr,e.transform=Wt,e.unmemoize=Kt,e.until=Yt,e.waterfall=pr,e.whilst=Xt,e.all=Bn,e.allLimit=qn,e.allSeries=Qn,e.any=or,e.anyLimit=sr,e.anySeries=ar,e.find=Nn,e.findLimit=Dn,e.findSeries=Mn,e.forEach=jt,e.forEachSeries=Hn,e.forEachLimit=kt,e.forEachOf=Ye,e.forEachOfSeries=Pn,e.forEachOfLimit=O,e.inject=pt,e.foldl=pt,e.foldr=Dt,e.select=zn,e.selectLimit=Gn,e.selectSeries=$n,e.wrapSync=D,Object.defineProperty(e,"__esModule",{value:!0})})}).call(e,n(10)(t))},function(t,e,n){"use strict";var r=n(1),i=r.getLogger("ControllerApp"),o=n(12),s=n(64).exec,a=n(15),u=new Date;e.status=function(t,e){i.info("Status Api Call");var n=t.app;if(t.param("info")){var r={};a.parallel([function(t){s("netstat -an | grep :80 | wc -l",function(e,n){r[80]=parseInt(n,10),t()})},function(t){s("netstat -an | grep :"+n.set("port")+" | wc -l",function(e,i){r[n.set("port")]=parseInt(i,10),t()})}],function(t){e.json({status:"up",version:n.get("version"),sha:n.get("git sha"),started_at:u,node:{version:process.version,memory:Math.round(process.memoryUsage().rss/1024/1024)+"M",uptime:process.uptime()},system:{loadavg:o.loadavg(),freeMemory:Math.round(o.freemem()/1024/1024)+"M"},env:process.env.NODE_ENV,hostname:o.hostname(),connections:r,swap:void 0})})}else e.json({status:"up"})}},function(t,e,n){"use strict";function r(t,e){t.set({"Content-Type":"application/octet-stream","Content-Disposition":"attachment; filename="+e})}var i=n(1),o=i.getLogger("ControllerDownload");e.Download=function(t,e){o.info("Download Api Call:"+t.params.fileName);var n=t.params.fileName;r(e,n),t.models.download.Download(n).then(function(t){void 0===t.code?t.pipe(e):e.json(t)})},e.Show=function(t,e){o.info("Show Api Call:"+t.params.fileName);var n=t.params.fileName;t.models.download.Download(n).then(function(t){void 0===t.code?t.pipe(e):e.json(t)})}},function(t,e,n){"use strict";e.app=n(16),e.download=n(17),e.update=n(19),e.upload=n(20)},function(t,e,n){"use strict";var r=n(1),i=r.getLogger("ControllerUpdate"),r=n(1),i=r.getLogger("ControllerUpdate");e.UpdateBinary=function(t,e){i.info("Update Binary file Api call"),t.models.update.Update(t).then(function(t){e.json(t)})},e.UpdateStr=function(t,e){i.info("Update str file Api call");var n=t.body.strName,r=t.body.str;r&&n?t.models.update.UpdateStr(n,r).then(function(t){e.json(t)}):e.json({code:1,msg:"非法参数"})},e.Delete=function(t,e){i.info("Delete file Api call");var n=t.params.fileName;t.models.update.Delete(n).then(function(t){e.json(t)})}},function(t,e,n){"use strict";var r=n(1),i=r.getLogger("ControllerUpload");e.UploadBinary=function(t,e){i.info("Upload Binary file Api call"),t.models.upload.Upload(t).then(function(t){e.json(t)})},e.UploadStr=function(t,e){i.info("Upload str file Api call");var n=t.body.strName,r=t.body.str;r&&n?t.models.upload.UploadStr(n,r).then(function(t){e.json(t)}):e.json({code:1,msg:"非法参数"})}},function(t,e,n){"use strict";var r=n(1),i=r.getLogger("MongoseIniter"),o=n(4),s=o.join,a=n(73).Readable,u=n(71),c=n(69);u.Promise=n(4);var l=o.promisifyAll(n(7));c.mongo=u.mongo;var f=void 0;e.saveFile=function(t,e){return s(f.createWriteStream(t),l.createReadStream(e),function(t,e){return e.pipe(t),!0}).error(function(){return!1})},e.saveStr=function(t,e){var n=new a;return n.push(e),n.push(null),s(f.createWriteStream(t),n,function(t,e){return e.pipe(t),!0}).error(function(){return!1})},e.GetGFS=function(){return f},e.boot=function(){var t={server:{socketOptions:{keepAlive:1}}};u.connect(process.env.MongoUrl+"/"+process.env.MongoTable,t);var e=u.connection;f=c(e.db),o.promisifyAll(f),e.on("error",function(t){i.error(t)}).once("open",function(){i.info("MongoDB open")})}},function(t,e,n){"use strict";var r=n(6).mongoose;e.Download=function(t){return r.GetGFS().existAsync({filename:t}).then(function(e){return e?r.GetGFS().createReadStream({filename:t}):{code:1,msg:"文件不存在"}})}},function(t,e,n){"use strict";e.download=n(22),e.update=n(24),e.upload=n(25)},function(t,e,n){"use strict";function r(t){return l.GetGFS().removeAsync({filename:t})}function i(t){var e=t.originalFilename,n=a.v1(),i=t.path,o={_id:n,filename:e,content_type:t.headers["content-type"]};return l.GetGFS().existAsync({filename:e}).then(function(t){return t?r(e).then(function(){return"覆盖"}):"保存"}).catch(function(t){return{code:1,msg:"删除文件出错"}}).then(function(t){return l.saveFile(o,i).then(function(e){return e?{code:0,msg:t+"成功"}:{code:1,msg:t+"失败"}})})}var o=n(1),s=(o.getLogger("ServiceUpdate"),n(4)),a=n(13),u=s.promisifyAll(n(7)),c=s.promisifyAll(n(11)),l=n(6).mongoose;e.Update=function(t){return(new c.Form).parseAsync(t).spread(function(t,e){return e.file}).each(function(t){return i(t).then(function(e){return t.stat=e})}).map(function(t){return u.unlinkAsync(t.path),{filename:t.originalFilename,stat:t.stat}}).then(function(t){var e={code:0};return e._links=t,e})},e.UpdateStr=function(t,e){return l.GetGFS().existAsync({filename:t}).then(function(e){return console.log(e),e?r(t).then(function(){return"覆盖"}):"保存"}).then(function(n){var r=a.v1();return l.saveStr({_id:r,filename:t},e).then(function(t){return t?{code:0,msg:n+"成功"}:{code:1,msg:n+"失败"}})})},e.Delete=function(t){return l.GetGFS().removeAsync({filename:t}).then(function(){return{code:0}}).catch(function(){return{code:1,msg:"删除文件失败",filename:t}})}},function(t,e,n){"use strict";function r(t){var e=t.originalFilename;return c.GetGFS().existAsync({filename:e}).then(function(n){if(n)return!1;var r=s.v1(),i=t.path;return c.saveFile({_id:r,filename:e,content_type:t.headers["content-type"]},i)}).then(function(t){return t?{code:0,_link:e}:{code:1,msg:"文件存在"}})}var i=n(1),o=(i.getLogger("ServiceUpload"),n(4)),s=n(13),a=o.promisifyAll(n(7)),u=o.promisifyAll(n(11)),c=n(6).mongoose;e.Upload=function(t){return(new u.Form).parseAsync(t).spread(function(t,e){return e.file}).each(function(t){return r(t).then(function(e){return t.stat=e})}).map(function(t){return a.unlinkAsync(t.path),{filename:t.originalFilename,stat:t.stat}}).then(function(t){var e={code:0};return e._links=t,e})},e.UploadStr=function(t,e){return c.GetGFS().existAsync({filename:t}).then(function(n){if(n)return{code:1,msg:"文件存在"};var r=s.v1();return c.saveStr({_id:r,filename:t},e),{code:0,_link:t}})}},function(t,e,n){"use strict";var r=process.env;e.ENVSET=function(){r.PORT=3e3,r.MongoUrl="mongodb://root:root@120.25.217.56:27017",r.MongoTable="jrecord",r.RedisPort=6379,r.RedisHost="120.25.217.56",r.SessionTimeOut=18e3}},function(t,e,n){"use strict";e.env=n(26)},function(t,e,n){"use strict";e.log4j=n(29)},function(t,e,n){"use strict";var r={appenders:[{type:"file",filename:"logs/latest.log",maxLogSize:10485760,append:!0,numBackups:5,compress:!0,encoding:"utf-8",mode:parseInt("0640",8),flags:"w+"},{type:"dateFile",compress:!0,filename:"logs/important",pattern:"_yyyy-MM-dd.log",alwaysIncludePattern:!0},{type:"stdout"}],replaceConsole:!0};e.set=function(){n(1).configure(r),n(1).getLogger().setLevel("TRACE")}},function(t,e,n){"use strict";(function(t){function r(){"test"!==p.get("env")&&p.listen(y,function(){s.info("服务器端口："+y)})}function i(){m.close()}var o=n(1),s=o.getLogger("server"),a=n(68),u=n(70),c=n(4),l=(c.promisifyAll(n(7)),n(72),n(63)),f=n(66),p=a(),h=n(14),d=n(23);p.use(function(t,e,n){return d.download||d.update||d.upload?(t.models=d,n()):n(new Error("No Models Registed"))}),p.use(l.json()),p.use(l.urlencoded({extended:!0})),p.use(f());var _=n(67);"development"===process.env.NODE_ENV?p.use(_({dumpExceptions:!0,showStack:!0})):"production"===process.env.NODE_ENV&&p.use(_());var v=n(18);p.get("/download/download/:fileName",v.download.Download),p.get("/download/show/:fileName",v.download.Show),p.post("/update/binary",v.update.UpdateBinary),p.post("/update/text",v.update.UpdateStr),p.get("/update/delete/:fileName",v.update.Delete),p.post("/upload/binary",v.upload.UploadBinary),p.post("/upload/text",v.upload.UploadStr),n(6).mongoose.boot(),p.all("*",function(t,e){e.status(404).json({code:404,msg:"没有此Api",_links:h})}),p.use(function(t,e,n,r){if(n.headersSent)return r(t);n.status(500),n.json({code:500,msg:"发生未知错误",_links:h})});var y=process.env.PORT||3e3,m=u.createServer(p);m.on("error",function(t){s.error(t)}),process.addListener("uncaughtException",function(t){s.error(t),process.exit(1)}),e.app=p,e.boot=r,e.shutdown=i,e.port=y,n.c[n.s]===t?n(8):console.log("Running app as a module")}).call(e,n(10)(t))},function(t,e,n){"use strict";t.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=function(t,e){this._reject(e)},i=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(r,r,null,this,t)},o=function(t,e){this._isPending()&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(r){var a=n(r),u=new t(e);u._propagateFrom(this,1);var c=this._target();if(u._setBoundTo(a),a instanceof t){var l={promiseRejectionQueued:!1,promise:u,target:c,bindingPromise:a};c._then(e,i,u._progress,u,l),a._then(o,s,u._progress,u,l)}else u._resolveCallback(c);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},t.prototype._isBound=function(){return 131072==(131072&this._bitField)},t.bind=function(r,i){var o=n(r),s=new t(e);return s._setBoundTo(o),o instanceof t?o._then(function(){s._resolveCallback(i)},s._reject,s._progress,s,null):s._resolveCallback(i),s}}},function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){function e(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+l.classString(e)+" has no method '"+l.toString(n)+"'";throw new t.TypeError(i)}return r}function r(t){return e(t,this.pop()).apply(t,this)}function s(t){return t[this]}function a(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var u,c,l=n(0),f=l.canEvaluate,p=l.isIdentifier,h=function(t){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,t))(e)},d=function(t){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",t))},_=function(t,e,n){var r=n[t];if("function"!=typeof r){if(!p(t))return null;if(r=e(t),n[t]=r,++n[" size"]>512){for(var i=Object.keys(n),o=0;o<256;++o)delete n[i[o]];n[" size"]=i.length-256}}return r};u=function(t){return _(t,h,i)},c=function(t){return _(t,d,o)},t.prototype.call=function(t){for(var e=arguments.length,n=new Array(e-1),i=1;i<e;++i)n[i-1]=arguments[i];if(f){var o=u(t);if(null!==o)return this._then(o,void 0,void 0,n,void 0)}return n.push(t),this._then(r,void 0,void 0,n,void 0)},t.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=a;else if(f){var r=c(t);e=null!==r?r:s}else e=s;return this._then(e,void 0,void 0,t,void 0)}}},function(t,e,n){"use strict";t.exports=function(t){var e=n(2),r=n(3),i=e.CancellationError;t.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,n=this;void 0!==(e=n._cancellationParent)&&e.isCancellable();)n=e;this._unsetCancellable(),n._target()._rejectCallback(t,!1,!0)},t.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new i),r.invokeLater(this._cancel,this,t),this):this},t.prototype.cancellable=function(){return this._cancellable()?this:(r.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0,this)},t.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},t.prototype.fork=function(t,e,n){var r=this._then(t,e,n,void 0,void 0);return r._setCancellable(),r._cancellationParent=void 0,r}}},function(t,e,n){"use strict";t.exports=function(){function t(e){this._parent=e;var n=this._length=1+(void 0===e?0:e._length);b(this,t),n>32&&this.uncycle()}function e(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function r(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function i(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var u=r[a];if(e[i]!==u)break;e.pop(),i--}e=r}}function o(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i=d.test(r)||"    (No stack trace)"===r,o=i&&y(r);i&&!o&&(v&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function s(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||d.test(r))break}return n>0&&(e=e.slice(n)),e}function a(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+u(e)+">, no stack trace)"}function u(t){return t.length<41?t:t.substr(0,38)+"..."}function c(t){var e=t.match(m);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}var l,f=n(3),p=n(0),h=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,d=null,_=null,v=!1;p.inherits(t,Error),t.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<t;++r){var s=e[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var u=r>0?e[r-1]:this;a<t-1?(u._parent=e[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},t.prototype.parent=function(){return this._parent},t.prototype.hasParent=function(){return void 0!==this._parent},t.prototype.attachExtraTrace=function(n){if(!n.__stackCleaned__){this.uncycle();for(var s=t.parseStackAndMessage(n),a=s.message,u=[s.stack],c=this;void 0!==c;)u.push(o(c.stack.split("\n"))),c=c._parent;i(u),r(u),p.notEnumerableProp(n,"stack",e(a,u)),p.notEnumerableProp(n,"__stackCleaned__",!0)}},t.parseStackAndMessage=function(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?s(t):["    (No stack trace)"],{message:n,stack:o(e)}},t.formatAndLogError=function(t,e){if("undefined"!=typeof console){var n;if("object"==typeof t||"function"==typeof t){var r=t.stack;n=e+_(r,t)}else n=e+String(t);"function"==typeof l?l(n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}},t.unhandledRejection=function(e){t.formatAndLogError(e,"^--- With additional stack trace: ")},t.isSupported=function(){return"function"==typeof b},t.fireRejectionEvent=function(e,n,r,i){var o=!1;try{"function"==typeof n&&(o=!0,"rejectionHandled"===e?n(i):n(r,i))}catch(t){f.throwLater(t)}var s=!1;try{s=w(e,r,i)}catch(t){s=!0,f.throwLater(t)}var a=!1;if(g)try{a=g(e.toLowerCase(),{reason:r,promise:i})}catch(t){a=!0,f.throwLater(t)}s||o||a||"unhandledRejection"!==e||t.formatAndLogError(r,"Unhandled rejection ")};var y=function(){return!1},m=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;t.setBounds=function(e,n){if(t.isSupported()){for(var r,i,o=e.stack.split("\n"),s=n.stack.split("\n"),a=-1,u=-1,l=0;l<o.length;++l){var f=c(o[l]);if(f){r=f.fileName,a=f.line;break}}for(var l=0;l<s.length;++l){var f=c(s[l]);if(f){i=f.fileName,u=f.line;break}}a<0||u<0||!r||!i||r!==i||a>=u||(y=function(t){if(h.test(t))return!0;var e=c(t);return!!(e&&e.fileName===r&&a<=e.line&&e.line<=u)})}};var g,b=function(){var t=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():a(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,d=/^\s*at\s*/,_=t;var e=Error.captureStackTrace;return y=function(t){return h.test(t)},function(t,n){Error.stackTraceLimit=Error.stackTraceLimit+6,e(t,n),Error.stackTraceLimit=Error.stackTraceLimit-6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return d=/@/,_=t,v=!0,function(t){t.stack=(new Error).stack};var r;try{throw new Error}catch(t){r="stack"in t}return"stack"in n||!r||"number"!=typeof Error.stackTraceLimit?(_=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?a(e):e.toString()},null):(d=/^\s*at\s*/,_=t,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}(),w=function(){if(p.isNode)return function(t,e,n){return"rejectionHandled"===t?process.emit(t,n):process.emit(t,e,n)};var t=!1,e=!0;try{var n=new self.CustomEvent("test");t=n instanceof CustomEvent}catch(t){}if(!t)try{var r=document.createEvent("CustomEvent");r.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(r)}catch(t){e=!1}e&&(g=function(e,n){var r;return t?r=new self.CustomEvent(e,{detail:n,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!1,!0,n)),!!r&&!self.dispatchEvent(r)});var i={};return i.unhandledRejection="onunhandledRejection".toLowerCase(),i.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,n){var r=i[t],o=self[r];return!!o&&("rejectionHandled"===t?o.call(self,n):o.call(self,e,n),!0)}}();return"undefined"!=typeof console&&void 0!==console.warn&&(l=function(t){console.warn(t)},p.isNode&&process.stderr.isTTY?l=function(t){process.stderr.write("[31m"+t+"[39m\n")}:p.isNode||"string"!=typeof(new Error).stack||(l=function(t){console.warn("%c"+t,"color: red")})),t}},function(t,e,n){"use strict";t.exports=function(t){function e(t,e,n){this._instances=t,this._callback=e,this._promise=n}function r(t,e){var n={},r=s(t).call(n,e);return r===a?r:u(n).length?(a.e=new c("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):r}var i=n(0),o=n(2),s=i.tryCatch,a=i.errorObj,u=n(5).keys,c=o.TypeError;return e.prototype.doFilter=function(e){for(var n=this._callback,i=this._promise,o=i._boundValue(),u=0,c=this._instances.length;u<c;++u){var l=this._instances[u],f=l===Error||null!=l&&l.prototype instanceof Error;if(f&&e instanceof l){var p=s(n).call(o,e);return p===a?(t.e=p.e,t):p}if("function"==typeof l&&!f){var h=r(l,e);if(h===a){e=a.e;break}if(h){var p=s(n).call(o,e);return p===a?(t.e=p.e,t):p}}}return t.e=e,t},e}},function(t,e,n){"use strict";t.exports=function(t,e,n){function r(){this._trace=new e(o())}function i(){if(n())return new r}function o(){var t=s.length-1;if(t>=0)return s[t]}var s=[];return r.prototype._pushContext=function(){n()&&void 0!==this._trace&&s.push(this._trace)},r.prototype._popContext=function(){n()&&void 0!==this._trace&&s.pop()},t.prototype._peekContext=o,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,i}},function(t,e,n){"use strict";t.exports=function(t,e){var r,i,o=t._getDomain,s=n(3),a=n(2).Warning,u=n(0),c=u.canAttachTrace,l=u.isNode&&(!!process.env.BLUEBIRD_DEBUG||"development"===process.env.NODE_ENV);return u.isNode&&0==process.env.BLUEBIRD_DEBUG&&(l=!1),l&&s.disableTrampolineIfNecessary(),t.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},t.prototype._ensurePossibleRejectionHandled=function(){0==(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),s.invokeLater(this._notifyUnhandledRejection,this,void 0))},t.prototype._notifyUnhandledRejectionIsHandled=function(){e.fireRejectionEvent("rejectionHandled",r,void 0,this)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),e.fireRejectionEvent("unhandledRejection",i,t,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},t.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},t.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},t.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},t.prototype._captureStackTrace=function(){return l&&(this._trace=new e(this._peekContext())),this},t.prototype._attachExtraTrace=function(t,n){if(l&&c(t)){var r=this._trace;if(void 0!==r&&n&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=e.parseStackAndMessage(t);u.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),u.notEnumerableProp(t,"__stackCleaned__",!0)}}},t.prototype._warn=function(t){var n=new a(t),r=this._peekContext();if(r)r.attachExtraTrace(n);else{var i=e.parseStackAndMessage(n);n.stack=i.message+"\n"+i.stack.join("\n")}e.formatAndLogError(n,"")},t.onPossiblyUnhandledRejection=function(t){var e=o();i="function"==typeof t?null===e?t:e.bind(t):void 0},t.onUnhandledRejectionHandled=function(t){var e=o();r="function"==typeof t?null===e?t:e.bind(t):void 0},t.longStackTraces=function(){if(s.haveItemsQueued()&&!1===l)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");(l=e.isSupported())&&s.disableTrampolineIfNecessary()},t.hasLongStackTraces=function(){return l&&e.isSupported()},e.isSupported()||(t.longStackTraces=function(){},l=!1),function(){return l}}},function(t,e,n){"use strict";var r=n(0),i=r.isPrimitive;t.exports=function(t){var e=function(){return this},n=function(){throw this},r=function(){},o=function(){throw void 0},s=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype.return=t.prototype.thenReturn=function(n){return void 0===n?this.then(r):i(n)?this._then(s(n,2),void 0,void 0,void 0,void 0):(n instanceof t&&n._ignoreRejections(),this._then(e,void 0,void 0,n,void 0))},t.prototype.throw=t.prototype.thenThrow=function(t){return void 0===t?this.then(o):i(t)?this._then(s(t,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,t,void 0)}}},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.reduce;t.prototype.each=function(t){return n(this,t,null,e)},t.each=function(t,r){return n(t,r,null,e)}}},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},function(t,e,n){"use strict";t.exports=function(t,e,r){function i(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function u(t,e,n){var r;return r=p(e)?n?s(e):a(e):n?i:o,t._then(r,h,void 0,e,void 0)}function c(n){var i=this.promise,o=this.handler,s=i._isBound()?o.call(i._boundValue()):o();if(void 0!==s){var a=r(s,i);if(a instanceof t)return a=a._target(),u(a,n,i.isFulfilled())}return i.isRejected()?(e.e=n,e):n}function l(e){var n=this.promise,i=this.handler,o=n._isBound()?i.call(n._boundValue(),e):i(e);if(void 0!==o){var s=r(o,n);if(s instanceof t)return s=s._target(),u(s,e,!0)}return e}var f=n(0),p=f.isPrimitive,h=f.thrower;t.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var n={promise:this,handler:t};return this._then(e?c:l,e?c:void 0,void 0,n,void 0)},t.prototype.lastly=t.prototype.finally=function(t){return this._passThroughHandler(t,!0)},t.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){function o(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=f(n[o])(e);if(r._popContext(),s===l){r._pushContext();var a=t.reject(l.e);return r._popContext(),a}var u=i(s,r);if(u instanceof t)return u}return null}function s(e,n,i,o){(this._promise=new t(r))._captureStackTrace(),this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p}var a=n(2),u=a.TypeError,c=n(0),l=c.errorObj,f=c.tryCatch,p=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(e){if(e===l)return this._promise._rejectCallback(e.e,!1,!0);var n=e.value;if(!0===e.done)this._promise._resolveCallback(n);else{var r=i(n,this._promise);if(!(r instanceof t)&&null===(r=o(r,this._yieldHandlers,this._promise)))return void this._throw(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));r._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=f(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._next=function(t){this._promise._pushContext();var e=f(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},t.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=Object(e).yieldHandler,r=s,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i);return o._generator=e,o._next(void 0),o.promise()}},t.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("fn must be a function\n\n    See http://goo.gl/916lJJ\n");p.push(t)},t.spawn=function(n){if("function"!=typeof n)return e("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=new s(n,this),i=r.promise();return r._run(t.spawn),i}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){var o,s=n(0),a=s.canEvaluate,u=s.tryCatch,c=s.errorObj;if(a){for(var l=[],f=[void 0],p=1;p<=5;++p)l.push(function(t){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,t))}(p)),f.push(function(t){for(var e=[],n=1;n<=t;++n)e.push("holder.p"+n);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,e.join(", ")))}(p));var h=function(t,e){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=e,this.total=t,this.now=0};h.prototype.callers=f,h.prototype.checkFulfillment=function(t){var e=this.now;e++;var n=this.total;if(e>=n){var r=this.callers[n];t._pushContext();var i=u(r)(this);t._popContext(),i===c?t._rejectCallback(i.e,!1,!0):t._resolveCallback(i)}else this.now=e};var o=function(t){this._reject(t)}}t.join=function(){var n,s=arguments.length-1;if(s>0&&"function"==typeof arguments[s]&&(n=arguments[s],s<6&&a)){var u=new t(i);u._captureStackTrace();for(var c=new h(s,n),f=l,p=0;p<s;++p){var d=r(arguments[p],u);d instanceof t?(d=d._target(),d._isPending()?d._then(f[p],o,void 0,u,c):d._isFulfilled()?f[p].call(u,d._value(),c):u._reject(d._reason())):f[p].call(u,d,c)}return u}for(var _=arguments.length,v=new Array(_),y=0;y<_;++y)v[y]=arguments[y];n&&v.pop();var u=new e(v).promise();return void 0!==n?u.spread(n):u}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=c();this._callback=null===i?e:i.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:_,l.invoke(a,this,void 0)}function a(){this._init$(void 0,-2)}function u(t,e,n,r){var i="object"==typeof n&&null!==n?n.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new s(t,e,i,r)}var c=t._getDomain,l=n(3),f=n(0),p=f.tryCatch,h=f.errorObj,d={},_=[];f.inherits(s,e),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(r[n]===d){if(r[n]=e,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return r[n]=e,void this._queue.push(n);null!==s&&(s[n]=e);var u=this._callback,c=this._promise._boundValue();this._promise._pushContext();var l=p(u).call(c,e,n,o);if(this._promise._popContext(),l===h)return this._reject(l.e);var f=i(l,this._promise);if(f instanceof t){if(f=f._target(),f._isPending())return a>=1&&this._inFlight++,r[n]=d,f._proxyPromiseArray(this,n);if(!f._isFulfilled())return this._reject(f._reason());l=f._value()}r[n]=l}++this._totalResolved>=o&&(null!==s?this._filter(r,s):this._resolve(r))},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(t,e){return"function"!=typeof t?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(this,t,e,null).promise()},t.map=function(t,e,n,i){return"function"!=typeof e?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(t,e,n,i).promise()}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){var o=n(0),s=o.tryCatch;t.method=function(n){if("function"!=typeof n)throw new t.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var r=new t(e);r._captureStackTrace(),r._pushContext();var i=s(n).apply(this,arguments);return r._popContext(),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(n,r,a){if("function"!=typeof n)return i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var u=new t(e);u._captureStackTrace(),u._pushContext();var c=o.isArray(r)?s(n).apply(a,r):s(n).call(a,r);return u._popContext(),u._resolveFromSyncValue(c),u},t.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},function(t,e,n){"use strict";t.exports=function(t){function e(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundValue(),[null].concat(t));i===u&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?a(e).call(r,null):a(e).call(r,null,t);i===u&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=n._target(),i=r._getCarriedStackTrace();i.cause=t,t=i}var o=a(e).call(n._boundValue(),t);o===u&&s.throwLater(o.e)}var o=n(0),s=n(3),a=o.tryCatch,u=o.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(t,n){if("function"==typeof t){var o=r;void 0!==n&&Object(n).spread&&(o=e),this._then(o,i,void 0,this,t)}return this}}},function(t,e,n){"use strict";t.exports=function(t,e){var r=n(0),i=n(3),o=r.tryCatch,s=r.errorObj;t.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},t.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},t.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},t.prototype._doProgressWith=function(e){var n=e.value,i=e.handler,a=e.promise,u=e.receiver,c=o(i).call(u,n);if(c===s){if(null!=c.e&&"StopProgressPropagation"!==c.e.name){var l=r.canAttachTrace(c.e)?c.e:new Error(r.toString(c.e));a._attachExtraTrace(l),a._progress(c.e)}}else c instanceof t?c._then(a._progress,null,null,a,void 0):a._progress(c)},t.prototype._progressUnchecked=function(n){for(var r=this._length(),o=this._progress,s=0;s<r;s++){var a=this._progressHandlerAt(s),u=this._promiseAt(s);if(u instanceof t)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:u,receiver:this._receiverAt(s),value:n}):i.invoke(o,u,n);else{var c=this._receiverAt(s);"function"==typeof a?a.call(c,n,u):c instanceof e&&!c._isResolved()&&c._promiseProgressed(n,u)}}}}},function(t,e,n){"use strict";t.exports=function(){function t(e){if("function"!=typeof e)throw new f("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==t)throw new f("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,e!==p&&this._resolveFromResolver(e)}function e(e){var n=new t(p);n._fulfillmentHandler0=e,n._rejectionHandler0=e,n._progressHandler0=e,n._promise0=e,n._receiver0=e,n._settledValue=e}var r,i=function(){return new f("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},o=function(){return new t.PromiseInspection(this._target())},s=function(e){return t.reject(new f(e))},a=n(0);r=a.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},a.notEnumerableProp(t,"_getDomain",r);var u={},c=n(3),l=n(2),f=t.TypeError=l.TypeError;t.RangeError=l.RangeError,t.CancellationError=l.CancellationError,t.TimeoutError=l.TimeoutError,t.OperationalError=l.OperationalError,t.RejectionError=l.OperationalError,t.AggregateError=l.AggregateError;var p=function(){},h={},d={e:null},_=n(60)(t,p),v=n(50)(t,p,_,s),y=n(35)(),m=n(38)(t,y),g=n(37)(t,y,m),b=n(36)(d),w=n(9),j=w._nodebackForPromise,k=a.errorObj,E=a.tryCatch;return t.prototype.toString=function(){return"[object Promise]"},t.prototype.caught=t.prototype.catch=function(e){var n=arguments.length;if(n>1){var r,i=new Array(n-1),o=0;for(r=0;r<n-1;++r){var s=arguments[r];if("function"!=typeof s)return t.reject(new f("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));i[o++]=s}i.length=o,e=arguments[r];var a=new b(i,e,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,e,void 0,void 0,void 0)},t.prototype.reflect=function(){return this._then(o,o,void 0,this,void 0)},t.prototype.then=function(t,e,n){if(m()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var r=".then() only accepts functions but was passed: "+a.classString(t);arguments.length>1&&(r+=", "+a.classString(e)),this._warn(r)}return this._then(t,e,n,void 0,void 0)},t.prototype.done=function(t,e,n){this._then(t,e,n,void 0,void 0)._setIsFinal()},t.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,h,void 0)},t.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},t.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},t.prototype.all=function(){return new v(this).promise()},t.prototype.error=function(t){return this.caught(a.originatesFromRejection,t)},t.is=function(e){return e instanceof t},t.fromNode=function(e){var n=new t(p),r=E(e)(j(n));return r===k&&n._rejectCallback(r.e,!0,!0),n},t.all=function(t){return new v(t).promise()},t.defer=t.pending=function(){var e=new t(p);return new w(e)},t.cast=function(e){var n=_(e);if(!(n instanceof t)){var r=n;n=new t(p),n._fulfillUnchecked(r)}return n},t.resolve=t.fulfilled=t.cast,t.reject=t.rejected=function(e){var n=new t(p);return n._captureStackTrace(),n._rejectCallback(e,!0),n},t.setScheduler=function(t){if("function"!=typeof t)throw new f("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=c._schedule;return c._schedule=t,e},t.prototype._then=function(e,n,i,o,s){var a=void 0!==s,u=a?s:new t(p);a||(u._propagateFrom(this,5),u._captureStackTrace());var l=this._target();l!==this&&(void 0===o&&(o=this._boundTo),a||u._setIsMigrated());var f=l._addCallbacks(e,n,i,u,o,r());return l._isResolved()&&!l._isSettlePromisesQueued()&&c.invoke(l._settlePromiseAtPostResolution,l,f),u},t.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},t.prototype._length=function(){return 131071&this._bitField},t.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},t.prototype._isFollowing=function(){return 536870912==(536870912&this._bitField)},t.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},t.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},t.prototype._setRejected=function(){this._bitField=134217728|this._bitField},t.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},t.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},t.prototype._isFinal=function(){return(33554432&this._bitField)>0},t.prototype._cancellable=function(){return(67108864&this._bitField)>0},t.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},t.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},t.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},t.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},t.prototype._isMigrated=function(){return(4194304&this._bitField)>0},t.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];if(e!==u)return void 0===e&&this._isBound()?this._boundValue():e},t.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},t.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},t.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},t.prototype._boundValue=function(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e},t.prototype._migrateCallbacks=function(e,n){var r=e._fulfillmentHandlerAt(n),i=e._rejectionHandlerAt(n),o=e._progressHandlerAt(n),s=e._promiseAt(n),a=e._receiverAt(n);s instanceof t&&s._setIsMigrated(),void 0===a&&(a=u),this._addCallbacks(r,i,o,s,a,null)},t.prototype._addCallbacks=function(t,e,n,r,i,o){var s=this._length();if(s>=131066&&(s=0,this._setLength(0)),0===s)this._promise0=r,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===o?t:o.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===o?e:o.bind(e)),"function"==typeof n&&(this._progressHandler0=null===o?n:o.bind(n));else{var a=5*s-5;this[a+3]=r,this[a+4]=i,"function"==typeof t&&(this[a+0]=null===o?t:o.bind(t)),"function"==typeof e&&(this[a+1]=null===o?e:o.bind(e)),"function"==typeof n&&(this[a+2]=null===o?n:o.bind(n))}return this._setLength(s+1),s},t.prototype._setProxyHandlers=function(t,e){var n=this._length();if(n>=131066&&(n=0,this._setLength(0)),0===n)this._promise0=e,this._receiver0=t;else{var r=5*n-5;this[r+3]=e,this[r+4]=t}this._setLength(n+1)},t.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},t.prototype._resolveCallback=function(e,n){if(!this._isFollowingOrFulfilledOrRejected()){if(e===this)return this._rejectCallback(i(),!1,!0);var r=_(e,this);if(!(r instanceof t))return this._fulfill(e);var o=1|(n?4:0);this._propagateFrom(r,o);var s=r._target();if(s._isPending()){for(var a=this._length(),u=0;u<a;++u)s._migrateCallbacks(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(s)}else s._isFulfilled()?this._fulfillUnchecked(s._value()):this._rejectUnchecked(s._reason(),s._getCarriedStackTrace())}},t.prototype._rejectCallback=function(t,e,n){n||a.markAsOriginatingFromRejection(t);var r=a.ensureErrorObject(t),i=r===t;this._attachExtraTrace(r,!!e&&i),this._reject(t,i?void 0:r)},t.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=E(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,n),e=null)});n=!1,this._popContext(),void 0!==r&&r===k&&null!==e&&(e._rejectCallback(r.e,!0,!0),e=null)},t.prototype._settlePromiseFromHandler=function(t,e,n,r){if(!r._isRejected()){r._pushContext();var o;if(o=e!==h||this._isRejected()?E(t).call(e,n):E(t).apply(this._boundValue(),n),r._popContext(),o===k||o===r||o===d){var s=o===r?i():o.e;r._rejectCallback(s,!1,!0)}else r._resolveCallback(o)}},t.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},t.prototype._followee=function(){return this._rejectionHandler0},t.prototype._setFollowee=function(t){this._rejectionHandler0=t},t.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},t.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},t.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},t.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},t.prototype._settlePromiseAt=function(e){var n=this._promiseAt(e),r=n instanceof t;if(r&&n._isMigrated())return n._unsetIsMigrated(),c.invoke(this._settlePromiseAt,this,e);var i=this._isFulfilled()?this._fulfillmentHandlerAt(e):this._rejectionHandlerAt(e),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,s=this._settledValue,a=this._receiverAt(e);this._clearCallbackDataAtIndex(e),"function"==typeof i?r?this._settlePromiseFromHandler(i,a,s,n):i.call(a,s,n):a instanceof v?a._isResolved()||(this._isFulfilled()?a._promiseFulfilled(s,n):a._promiseRejected(s,n)):r&&(this._isFulfilled()?n._fulfill(s):n._reject(s,o)),e>=4&&4==(31&e)&&c.invokeLater(this._setLength,this,0)},t.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},t.prototype._isSettlePromisesQueued=function(){return-1073741824==(-1073741824&this._bitField)},t.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},t.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},t.prototype._queueSettlePromises=function(){c.settlePromises(this),this._setSettlePromisesQueued()},t.prototype._fulfillUnchecked=function(t){if(t===this){var e=i();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},t.prototype._rejectUncheckedCheckError=function(t){var e=a.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},t.prototype._rejectUnchecked=function(t,e){if(t===this){var n=i();return this._attachExtraTrace(n),this._rejectUnchecked(n)}if(this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal())return void c.throwLater(function(t){throw"stack"in t&&c.invokeFirst(y.unhandledRejection,void 0,t),t},void 0===e?t:e);void 0!==e&&e!==t&&this._setCarriedStackTrace(e),this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()},t.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;e<t;e++)this._settlePromiseAt(e)},a.notEnumerableProp(t,"_makeSelfResolutionError",i),n(48)(t,v),n(46)(t,p,_,s),n(32)(t,p,_),n(42)(t,d,_),n(39)(t),n(59)(t),n(44)(t,v,_,p),t.Promise=t,n(45)(t,v,s,_,p),n(34)(t),n(62)(t,s,_,g),n(43)(t,s,p,_),n(47)(t),n(33)(t),n(52)(t,v,_,s),n(54)(t,p,_,s),n(55)(t,v,s,_,p),n(57)(t,v),n(58)(t,v,s),n(51)(t,p),n(31)(t),n(40)(t,p),n(61)(t,p),n(41)(t,p),a.toFastProperties(t),a.toFastProperties(t.prototype),e({a:1}),e({b:2}),e({c:3}),e(1),e(function(){}),e(void 0),e(!1),e(new t(p)),y.setBounds(c.firstLineError,a.lastLineError),t}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){function o(t){switch(t){case-2:return[];case-3:return{}}}function s(n){var r,i=this._promise=new t(e);n instanceof t&&(r=n,i._propagateFrom(r,5)),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=n(0),u=a.isArray;return s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function e(n,s){var a=r(this._values,this._promise);if(a instanceof t){if(a=a._target(),this._values=a,!a._isFulfilled())return a._isPending()?void a._then(e,this._reject,void 0,this,s):void this._reject(a._reason());if(a=a._value(),!u(a)){var c=new t.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(c)}}else if(!u(a))return void this._promise._reject(i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0===a.length)return void(-5===s?this._resolveEmptyArray():this._resolve(o(s)));var l=this.getActualLength(a.length);this._length=l,this._values=this.shouldCopyValues()?new Array(l):this._values;for(var f=this._promise,p=0;p<l;++p){var h=this._isResolved(),d=r(a[p],f);d instanceof t?(d=d._target(),h?d._ignoreRejections():d._isPending()?d._proxyPromiseArray(this,p):d._isFulfilled()?this._promiseFulfilled(d._value(),p):this._promiseRejected(d._reason(),p)):h||this._promiseFulfilled(d,p)}},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype.__hardReject__=s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},s.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t,++this._totalResolved>=this._length&&this._resolve(this._values)},s.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},function(t,e,n){"use strict";t.exports=function(t,e){function r(t){return!w.test(t)}function i(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function o(t,e,n){var r=h.getDataPropertyOrDefault(t,e+n,g);return!!r&&i(r)}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}function a(t,e,n,r){for(var a=h.inheritedDataKeys(t),u=[],c=0;c<a.length;++c){var l=a[c],f=t[l],p=r===j||j(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!r(l,f,t,p)||u.push(l,f)}return s(u,e,n),u}function u(n,r,i,o){function s(){var i=r;r===p&&(i=this);var o=new t(e);o._captureStackTrace();var s="string"==typeof u&&this!==a?this[u]:n,c=d(o);try{s.apply(i,_(arguments,c))}catch(t){o._rejectCallback(v(t),!0,!0)}return o}var a=function(){return this}(),u=n;return"string"==typeof u&&(n=o),h.notEnumerableProp(s,"__isPromisified__",!0),s}function c(t,e,n,r){for(var i=new RegExp(k(e)+"$"),o=a(t,e,i,n),s=0,u=o.length;s<u;s+=2){var c=o[s],l=o[s+1],f=c+e;if(r===A)t[f]=A(c,p,c,l,e);else{var d=r(l,function(){return A(c,p,c,l,e)});h.notEnumerableProp(d,"__isPromisified__",!0),t[f]=d}}return h.toFastProperties(t),t}function l(t,e){return A(t,e,void 0,t)}var f,p={},h=n(0),d=n(9)._nodebackForPromise,_=h.withAppended,v=h.maybeWrapAsError,y=h.canEvaluate,m=n(2).TypeError,g={__isPromisified__:!0},b=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=new RegExp("^(?:"+b.join("|")+")$"),j=function(t){return h.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},k=function(t){return t.replace(/([$])/,"\\$")},E=function(t){for(var e=[t],n=Math.max(0,t-1-3),r=t-1;r>=n;--r)e.push(r);for(var r=t+1;r<=3;++r)e.push(r);return e},F=function(t){return h.filledRange(t,"_arg","")},S=function(t){return h.filledRange(Math.max(t,3),"_arg","")},x=function(t){return"number"==typeof t.length?Math.max(Math.min(t.length,1024),0):0};f=function(n,r,i,o){function s(t){var e,n=F(t).join(", "),i=t>0?", ":"";return e=c?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===r?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n",e.replace("{{args}}",n).replace(", ",i)}var a=Math.max(0,x(o)-1),u=E(a),c="string"==typeof n||r===p,l="string"==typeof n?"this != null ? this['"+n+"'] : fn":"fn";return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL","'use strict';                            \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise);                      \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n        ".replace("Parameters",S(a)).replace("[CodeForSwitchCase]",function(){for(var t="",e=0;e<u.length;++e)t+="case "+u[e]+":"+s(u[e]);return t+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",c?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n")}()).replace("[GetFunctionCode]",l))(t,o,r,_,v,d,h.tryCatch,h.errorObj,h.notEnumerableProp,e)};var A=y?f:u;t.promisify=function(t,e){if("function"!=typeof t)throw new m("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(i(t))return t;var n=l(t,arguments.length<2?p:e);return h.copyDescriptors(t,n,r),n},t.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");e=Object(e);var n=e.suffix;"string"!=typeof n&&(n="Async");var r=e.filter;"function"!=typeof r&&(r=j);var i=e.promisifier;if("function"!=typeof i&&(i=A),!h.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=h.inheritedDataKeys(t),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&h.isClass(a)&&(c(a.prototype,n,r,i),c(a,n,r,i))}return c(t,n,r,i)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){function o(t){for(var e=c.keys(t),n=e.length,r=new Array(2*n),i=0;i<n;++i){var o=e[i];r[i]=t[o],r[i+n]=o}this.constructor$(r)}function s(e){var n,s=r(e);return u(s)?(n=s instanceof t?s._then(t.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof t&&n._propagateFrom(s,4),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var a=n(0),u=a.isObject,c=n(5);a.inherits(o,e),o.prototype._init=function(){this._init$(void 0,-3)},o.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){for(var n={},r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i];this._resolve(n)}},o.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},t.prototype.props=function(){return s(this)},t.props=function(t){return s(t)}}},function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,r(this,0,this,e,this._front+this._length&e-1)},t.exports=i},function(t,e,n){"use strict";t.exports=function(t,e,r,i){function o(n,o){var u=r(n);if(u instanceof t)return a(u);if(!s(n))return i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var c=new t(e);void 0!==o&&c._propagateFrom(o,5);for(var l=c._fulfill,f=c._reject,p=0,h=n.length;p<h;++p){var d=n[p];(void 0!==d||p in n)&&t.cast(d)._then(l,f,void 0,c,null)}return c}var s=n(0).isArray,a=function(t){return t.then(function(e){return o(e,t)})};t.race=function(t){return o(t,void 0)},t.prototype.race=function(){return o(this,void 0)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o){function s(e,n,r,s){this.constructor$(e),this._promise._captureStackTrace(),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===r,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var u=i(r,this._promise),f=!1,p=u instanceof t;p&&(u=u._target(),u._isPending()?u._proxyPromiseArray(this,-1):u._isFulfilled()?(r=u._value(),this._gotAccum=!0):(this._reject(u._reason()),f=!0)),p||this._zerothIsAccum||(this._gotAccum=!0);var h=c();this._callback=null===h?n:h.bind(n),this._accum=r,f||l.invoke(a,this,void 0)}function a(){this._init$(void 0,-5)}function u(t,e,n,i){return"function"!=typeof e?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):new s(t,e,n,i).promise()}var c=t._getDomain,l=n(3),f=n(0),p=f.tryCatch,h=f.errorObj;f.inherits(s,e),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(e,n){var r=this._values;r[n]=e;var o,s=this.length(),a=this._preservedValues,u=null!==a,c=this._gotAccum,l=this._valuesPhase;if(!l)for(l=this._valuesPhase=new Array(s),o=0;o<s;++o)l[o]=0;if(o=l[n],0===n&&this._zerothIsAccum?(this._accum=e,this._gotAccum=c=!0,l[n]=0===o?1:2):-1===n?(this._accum=e,this._gotAccum=c=!0):0===o?l[n]=1:(l[n]=2,this._accum=e),c){for(var f,d=this._callback,_=this._promise._boundValue(),v=this._reducingIndex;v<s;++v)if(2!==(o=l[v])){if(1!==o)return;if(e=r[v],this._promise._pushContext(),u?(a.push(e),f=p(d).call(_,e,v,s)):f=p(d).call(_,this._accum,e,v,s),this._promise._popContext(),f===h)return this._reject(f.e);var y=i(f,this._promise);if(y instanceof t){if(y=y._target(),y._isPending())return l[v]=4,y._proxyPromiseArray(this,v);if(!y._isFulfilled())return this._reject(y._reason());f=y._value()}this._reducingIndex=v+1,this._accum=f}else this._reducingIndex=v+1;this._resolve(u?a:this._accum)}},t.prototype.reduce=function(t,e){return u(this,t,e,null)},t.reduce=function(t,e,n,r){return u(t,e,n,r)}}},function(t,e,n){"use strict";var r,i=n(0),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(i.isNode&&"undefined"==typeof MutationObserver){var s=global.setImmediate,a=process.nextTick;r=i.isRecentNode?function(t){s.call(global,t)}:function(t){a.call(process,t)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?r="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o:(r=function(t){var e=document.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},r.isStatic=!0);t.exports=r},function(t,e,n){"use strict";t.exports=function(t,e){function r(t){this.constructor$(t)}var i=t.PromiseInspection;n(0).inherits(r,e),r.prototype._promiseResolved=function(t,e){this._values[t]=e,++this._totalResolved>=this._length&&this._resolve(this._values)},r.prototype._promiseFulfilled=function(t,e){var n=new i;n._bitField=268435456,n._settledValue=t,this._promiseResolved(e,n)},r.prototype._promiseRejected=function(t,e){var n=new i;n._bitField=134217728,n._settledValue=t,this._promiseResolved(e,n)},t.settle=function(t){return new r(t).promise()},t.prototype.settle=function(){return new r(this).promise()}}},function(t,e,n){"use strict";t.exports=function(t,e,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=n(0),a=n(2).RangeError,u=n(2).AggregateError,c=s.isArray;s.inherits(i,e),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},i.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new u,n=this.length();n<this._values.length;++n)e.push(this._values[n]);this._reject(e)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return o(t,e)},t.prototype.some=function(t){return o(this,t)},t._SomePromiseArray=i}},function(t,e,n){"use strict";t.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0==(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},function(t,e,n){"use strict";t.exports=function(t,e){function r(n,r){if(c(n)){if(n instanceof t)return n;if(o(n)){var l=new t(e);return n._then(l._fulfillUnchecked,l._rejectUncheckedCheckError,l._progressUnchecked,l,null),l}var f=a.tryCatch(i)(n);if(f===u){r&&r._pushContext();var l=t.reject(f.e);return r&&r._popContext(),l}if("function"==typeof f)return s(n,f,r)}return n}function i(t){return t.then}function o(t){return l.call(t,"_promise0")}function s(n,r,i){function o(t){l&&(l._resolveCallback(t),l=null)}function s(t){l&&(l._rejectCallback(t,p,!0),l=null)}function c(t){l&&"function"==typeof l._progress&&l._progress(t)}var l=new t(e),f=l;i&&i._pushContext(),l._captureStackTrace(),i&&i._popContext();var p=!0,h=a.tryCatch(r).call(n,o,s,c);return p=!1,l&&h===u&&(l._rejectCallback(h.e,!0,!0),l=null),f}var a=n(0),u=a.errorObj,c=a.isObject,l={}.hasOwnProperty;return r}},function(t,e,n){"use strict";t.exports=function(t,e){function r(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function i(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var o=n(0),s=t.TimeoutError,a=function(t,e){if(t.isPending()){var n;!o.isPrimitive(e)&&e instanceof Error?n=e:("string"!=typeof e&&(e="operation timed out"),n=new s(e)),o.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._cancel(n)}},u=function(t){return c(+this).thenReturn(t)},c=t.delay=function(n,r){if(void 0===r){r=n,n=void 0;var i=new t(e);return setTimeout(function(){i._fulfill()},r),i}return r=+r,t.resolve(n)._then(u,null,null,r,void 0)};t.prototype.delay=function(t){return c(this,t)},t.prototype.timeout=function(t,e){t=+t;var n=this.then().cancellable();n._cancellationParent=this;var o=setTimeout(function(){a(n,e)},t);return n._then(r,i,void 0,o,void 0)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){function o(e){for(var n=e.length,r=0;r<n;++r){var i=e[r];if(i.isRejected())return t.reject(i.error());e[r]=i._settledValue}return e}function s(t){setTimeout(function(){throw t},0)}function a(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function u(e,n){function i(){if(o>=u)return c.resolve();var l=a(e[o++]);if(l instanceof t&&l._isDisposable()){try{l=r(l._getDisposer().tryDispose(n),e.promise)}catch(t){return s(t)}if(l instanceof t)return l._then(i,s,null,null,null)}i()}var o=0,u=e.length,c=t.defer();return i(),c.promise}function c(t){var e=new v;return e._settledValue=t,e._bitField=268435456,u(this,e).thenReturn(t)}function l(t){var e=new v;return e._settledValue=t,e._bitField=134217728,u(this,e).thenThrow(t)}function f(t,e,n){this._data=t,this._promise=e,this._context=n}function p(t,e,n){this.constructor$(t,e,n)}function h(t){return f.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}var d=n(2).TypeError,_=n(0).inherits,v=t.PromiseInspection;f.prototype.data=function(){return this._data},f.prototype.promise=function(){return this._promise},f.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},f.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==e?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},f.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},_(p,f),p.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},t.using=function(){var n=arguments.length;if(n<2)return e("you must pass at least 2 arguments to Promise.using");var i=arguments[n-1];if("function"!=typeof i)return e("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var s,a=!0;2===n&&Array.isArray(arguments[0])?(s=arguments[0],n=s.length,a=!1):(s=arguments,n--);for(var u=new Array(n),p=0;p<n;++p){var d=s[p];if(f.isDisposer(d)){var _=d;d=d.promise(),d._setDisposable(_)}else{var v=r(d);v instanceof t&&(d=v._then(h,null,null,{resources:u,index:p},void 0))}u[p]=d}var y=t.settle(u).then(o).then(function(t){y._pushContext();var e;try{e=a?i.apply(void 0,t):i.call(void 0,t)}finally{y._popContext()}return e})._then(c,l,void 0,u,void 0);return u.promise=y,y},t.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},t.prototype._isDisposable=function(){return(262144&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},t.prototype.disposer=function(t){if("function"==typeof t)return new p(t,this,i());throw new d}}},function(t,e){t.exports=require("body-parser")},function(t,e){t.exports=require("child_process")},function(t,e){t.exports=require("cluster")},function(t,e){t.exports=require("cors")},function(t,e){t.exports=require("errorhandler")},function(t,e){t.exports=require("express")},function(t,e){t.exports=require("gridfs-stream")},function(t,e){t.exports=require("http")},function(t,e){t.exports=require("mongoose")},function(t,e){t.exports=require("path")},function(t,e){t.exports=require("stream")},function(t,e,n){t.exports=n(8)}]);